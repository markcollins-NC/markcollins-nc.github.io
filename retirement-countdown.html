<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Retirement Business Days Countdown</title>
   <style>
       * {
           margin: 0;
           padding: 0;
           box-sizing: border-box;
       }

       body {
           font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
           background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
           min-height: 100vh;
           display: flex;
           align-items: center;
           justify-content: center;
           padding: 20px;
       }

       .container {
           background: rgba(255, 255, 255, 0.95);
           backdrop-filter: blur(10px);
           border-radius: 20px;
           padding: 40px;
           box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
           text-align: center;
           max-width: 500px;
           width: 100%;
       }

       h1 {
           color: #2c3e50;
           font-size: 2.5rem;
           margin-bottom: 30px;
           font-weight: 700;
       }

       .input-section {
           margin-bottom: 40px;
       }

       label {
           display: block;
           margin-bottom: 10px;
           color: #34495e;
           font-weight: 600;
           font-size: 1.1rem;
       }
      
       input[type="date"] {
           width: 100%;
           max-width: 100%;
           padding: 15px;
           border: 2px solid #e0e0e0;
           border-radius: 10px;
           font-size: 1rem;
           transition: all 0.3s ease;
           background: white;
           -webkit-appearance: none;
           appearance: none;
       }

       input[type="date"]:focus {
           outline: none;
           border-color: #667eea;
           box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
       }

       .countdown-display {
           background: linear-gradient(135deg, #ff9800 0%, rgba(153, 113, 9, 0.78) 100%);
           color: white;
           padding: 30px;
           border-radius: 15px;
           margin: 30px 0;
           box-shadow: 0 10px 25px rgba(240, 147, 251, 0.3);
       }

       .countdown-number {
           font-size: 3.5rem;
           font-weight: 800;
           margin-bottom: 10px;
           text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
       }

       .countdown-label {
           font-size: 1.2rem;
           opacity: 0.9;
           text-transform: uppercase;
           letter-spacing: 2px;
       }

       .details {
           background: #f8f9fa;
           padding: 20px;
           border-radius: 10px;
           margin-top: 20px;
           color: #495057;
       }

       .detail-row {
           display: flex;
           justify-content: space-between;
           margin-bottom: 10px;
           padding: 5px 0;
       }

       .detail-row:last-child {
           margin-bottom: 0;
           font-weight: 600;
           border-top: 2px solid #dee2e6;
           padding-top: 15px;
       }

       .progress-bar {
           width: 100%;
           height: 8px;
           background: #e9ecef;
           border-radius: 4px;
           margin: 20px 0;
           overflow: hidden;
       }

       .progress-fill {
           height: 100%;
           background: linear-gradient(90deg, #667eea, #764ba2);
           border-radius: 4px;
           transition: width 0.3s ease;
       }

       @media (max-width: 480px) {
           .container {
               padding: 20px;
           }

           h1 {
               font-size: 2rem;
           }

           .countdown-number {
               font-size: 2.5rem;
           }
       }
   </style>
</head>
<body>
<div class="container">
   <h1>ðŸŽ¯ Retirement Countdown</h1>

   <div class="input-section">
      <label for="retirementDate">Select Your Retirement Date:</label>
      <input type="date" id="retirementDate" min="2025-01-01">
   </div>

   <div class="countdown-display" id="countdownDisplay" style="display: none;">
      <div class="countdown-number" id="countdownNumber">0</div>
      <div class="countdown-label">Business Days Until Retirement</div>
   </div>

   <div class="progress-bar" id="progressContainer" style="display: none;">
      <div class="progress-fill" id="progressFill"></div>
   </div>

   <div class="details" id="detailsSection" style="display: none;">
      <div class="detail-row">
         <span>Total Calendar Days:</span>
         <span id="totalDays">0</span>
      </div>
      <div class="detail-row">
         <span>Weekend Days:</span>
         <span id="weekendDays">0</span>
      </div>
      <div class="detail-row">
         <span>Federal Holidays:</span>
         <span id="holidayDays">0</span>
      </div>
      <div class="detail-row">
         <span>Business Days Remaining:</span>
         <span id="businessDays">0</span>
      </div>
   </div>
</div>

<script>
    // Federal holidays calculation
    function getFederalHolidays(year) {
        const holidays = [];

        // New Year's Day - January 1
        holidays.push(new Date(year, 0, 1));

        // Martin Luther King Jr. Day - Third Monday in January
        holidays.push(getNthWeekdayOfMonth(year, 0, 1, 3));

        // Memorial Day - Last Monday in May
        holidays.push(getLastWeekdayOfMonth(year, 4, 1));

        // Independence Day - July 4
        holidays.push(new Date(year, 6, 4));

        // Labor Day - First Monday in September
        holidays.push(getNthWeekdayOfMonth(year, 8, 1, 1));

        // Veterans Day - November 11
        holidays.push(new Date(year, 10, 11));

        // Thanksgiving - Fourth Thursday in November
        holidays.push(getNthWeekdayOfMonth(year, 10, 4, 4));
        holidays.push(getNthWeekdayOfMonth(year, 10, 5, 4));

        // Christmas Day - December 25
        holidays.push(new Date(year, 11, 24));
        holidays.push(new Date(year, 11, 25));
        holidays.push(new Date(year, 11, 26));

       // add known time off
       
        return holidays;
        holidays.push(new Date(year, 11, 29));
        holidays.push(new Date(year, 11, 30));
        holidays.push(new Date(year, 11, 31));
        holidays.push(new Date(year, 0, 2));
    }

    function getNthWeekdayOfMonth(year, month, weekday, n) {
        const firstDay = new Date(year, month, 1);
        const firstWeekday = firstDay.getDay();
        const offset = (weekday - firstWeekday + 7) % 7;
        return new Date(year, month, 1 + offset + (n - 1) * 7);
    }

    function getLastWeekdayOfMonth(year, month, weekday) {
        const lastDay = new Date(year, month + 1, 0);
        const lastWeekday = lastDay.getDay();
        const offset = (lastWeekday - weekday + 7) % 7;
        return new Date(year, month, lastDay.getDate() - offset);
    }

    function isWeekend(date) {
        const day = date.getDay();
        return day === 0 || day === 6; // Sunday = 0, Saturday = 6
    }

    function isHoliday(date, holidays) {
        return holidays.some(holiday =>
            holiday.getFullYear() === date.getFullYear() &&
            holiday.getMonth() === date.getMonth() &&
            holiday.getDate() === date.getDate()
        );
    }

    function calculateBusinessDays(startDate, endDate) {
        if (endDate <= startDate) {
            return {
                totalDays: 0,
                businessDays: 0,
                weekendDays: 0,
                holidayDays: 0
            };
        }

        let current = new Date(startDate);
        current.setHours(0, 0, 0, 0);

        const end = new Date(endDate);
        end.setHours(0, 0, 0, 0);

        let totalDays = 0;
        let businessDays = 0;
        let weekendDays = 0;
        let holidayDays = 0;

        // Get holidays for all years in the range
        const startYear = current.getFullYear();
        const endYear = end.getFullYear();
        let allHolidays = [];

        for (let year = startYear; year <= endYear; year++) {
            allHolidays = allHolidays.concat(getFederalHolidays(year));
        }

        while (current < end) {
            totalDays++;

            if (isWeekend(current)) {
                weekendDays++;
            }
            else if (isHoliday(current, allHolidays)) {
                holidayDays++;
            }
            else {
                businessDays++;
            }

            current.setDate(current.getDate() + 1);
        }

        return {
            totalDays,
            businessDays,
            weekendDays,
            holidayDays
        };
    }

    function updateCountdown() {
        const retirementInput = document.getElementById('retirementDate');
        const retirementDate = retirementInput.value;

        if (!retirementDate) {
            document.getElementById('countdownDisplay').style.display = 'none';
            document.getElementById('detailsSection').style.display = 'none';
            document.getElementById('progressContainer').style.display = 'none';
            return;
        }

        const today = new Date();
        today.setHours(0, 0, 0, 0);

        const retirement = new Date(retirementDate);
        retirement.setHours(0, 0, 0, 0);

        const result = calculateBusinessDays(today, retirement);

        // Update display
        document.getElementById('countdownNumber').textContent = result.businessDays;
        document.getElementById('totalDays').textContent = result.totalDays;
        document.getElementById('weekendDays').textContent = result.weekendDays;
        document.getElementById('holidayDays').textContent = result.holidayDays;
        document.getElementById('businessDays').textContent = result.businessDays;

        // Show sections
        document.getElementById('countdownDisplay').style.display = 'block';
        document.getElementById('detailsSection').style.display = 'block';

        // Calculate and show progress (assuming 30-year career)
        const assumedCareerStart = new Date(retirement);
        assumedCareerStart.setFullYear(retirement.getFullYear() - 30);

        const totalCareerDays = calculateBusinessDays(assumedCareerStart, retirement).businessDays;
        const remainingDays = result.businessDays;
        const completedDays = totalCareerDays - remainingDays;
        const progressPercent = Math.max(0, Math.min(100, (completedDays / totalCareerDays) * 100));

        document.getElementById('progressFill').style.width = progressPercent + '%';
        document.getElementById('progressContainer').style.display = 'block';
    }

    // Save retirement date to localStorage when changed
    const retirementInput = document.getElementById('retirementDate');
    retirementInput.addEventListener('change', function () {
        localStorage.setItem('retirementDate', retirementInput.value);
        updateCountdown();
    });

    // Set minimum date to tomorrow
    const today = new Date();
    const tomorrow = new Date(today);
    tomorrow.setDate(tomorrow.getDate() + 1);
    retirementInput.min = tomorrow.toISOString().split('T')[0];

    // Load retirement date from localStorage on page load
    window.addEventListener('DOMContentLoaded', function () {
        const savedDate = localStorage.getItem('retirementDate');
        if (savedDate) {
            retirementInput.value = savedDate;
        }
        updateCountdown();
    });

    // Update countdown every day at midnight
    setInterval(updateCountdown, 24 * 60 * 60 * 1000);
</script>
</body>
</html>


